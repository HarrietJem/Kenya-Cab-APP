// Replace the searchPlaces function with:
const searchPlaces = async (searchQuery) => {
  const service = new google.maps.places.PlacesService(map);
  const request = {
    query: searchQuery,
    location: currentLocation, // Your current location
    radius: 50000, // 50km radius
  };
  
  return new Promise((resolve) => {
    service.textSearch(request, (results, status) => {
      if (status === google.maps.places.PlacesServiceStatus.OK) {
        resolve(results.map(place => ({
          place_id: place.place_id,
          name: place.name,
          address: place.formatted_address,
          coordinates: {
            lat: place.geometry.location.lat(),
            lng: place.geometry.location.lng()
          }
        })));
      } else {
        resolve([]);
      }
    });
  });
};